# GitHubの操作(応用編)

## 目標

* 既存のリポジトリをforkする
* GitHub Pagesを使ってウェブサイトを公開する
* プルリクを体験する

## 課題1: プルリクエストを作ってみる

GitHubでは、公開されているリポジトリを自分の場所に「コピー」することができる。これをforkと呼ぶ。公開リポジトリは、HTTPSによりクローンはできるが、書き込み権限がなければ修正できない。しかし、forkすれば自分の所持するリポジトリとなるので、好きなように修正できる(ただし、ライセンスには気を付けること)。

### Step 1: リポジトリのfork

まず、既存のリポジトリをforkしよう。以下のサイトにアクセスせよ。

* A班の場合
[https://github.com/appi-github/pullreq_2021_a](https://github.com/appi-github/pullreq_2021_a)

* B班の場合
[https://github.com/appi-github/pullreq_2021_b](https://github.com/appi-github/pullreq_2021_b)

このサイトの右上に「Fork」というボタンがあるので、それを押す。すると自分のアカウントのリポジトリとしてコピーされる。以下、A班を例にリポジトリ名を`pullreq_2021_a`として説明するが、B班は適宜`pullreq_2021_b`に読み替えること。

### Step 2: リポジトリのクローン

ブラウザのURLが`https://github.com/自分のアカウント/リポジトリ名`になったら、フォークが完了している。ローカルにクローンしよう。「Code」ボタンの「Clone」からリモートリポジトリをコピーできる。プロトコルがHTTPSではなくSSHになっていることを確認すること。

```sh
cd
cd github
git clone git@github.com:アカウント名/pullreq_2021_a.git
cd pullreq_2021_a
```

### Step 3: ブランチの作成

次に、ブランチを作成するが、ブランチ名を「自分の学籍番号」のSHA-1ハッシュの上位7桁としよう。例えば学籍番号が`1234568`である時、以下のコマンドを実行せよ。

```sh
echo 12345678 | shasum
9806af3952e1380212b0998f07a6afe4e5f00428 *-
```

上記のSHA-1ハッシュは各自異なるため、以下は適宜読み替えること。

表示された上位7桁`9806af3`をブランチ名として、ブランチを作ろう。

```sh
git switch -c 9806af3
```

### Step 4: ファイルの追加とプッシュ

先ほどのSHA-1ハッシュをファイル名として、ファイルを作ろう。

```sh
echo Hello > 9806af3952e1380212b0998f07a6afe4e5f00428
```

できたファイルを`git add`、`git commit`しよう。

```sh
git add 9806af3952e1380212b0998f07a6afe4e5f00428
git commit -m "adds a file"
```

最後に修正をプッシュしよう。

```sh
git push origin 9806af3
```

`git push origin`の後にブランチ名を入れるのを忘れないこと。

### レポート課題: プルリクエストの作成

GitHubのフォークしたページを見ると、上部に「Compare & pull requst」というボタンが出来ているので押す。すると「Open a pull request」という画面に遷移するので、タイトルとコメントを入力する。タイトルは「add a file」、コメントはなんでも良いが、例えば「よろしくお願いします。」などとしておく。最後に「Create a pull request」を押せば、fork元にプルリクエストが飛ぶ。このプルリクエストを飛ばしたことをもってレポートとする。

## 課題1: MNISTの学習済みモデルをウェブで試す

MNISTは有名は手書き数字のデータセットだ。これを学習させたモデルをブラウザで読み込み、実際に数字を描いてみてちゃんと認識できるか確認してみよう。

### Step 1: リポジトリのfork

GitHubにログインした状態で、以下のサイトにアクセスせよ。

[https://github.com/appi-github/pages-sample](https://github.com/appi-github/pages-sample)

このサイトの右上に「Fork」というボタンがあるので、それを押す。すると、`pages-sample`がforkされ、自分のアカウントのリポジトリとしてコピーされる。

### Step 2: Pagesの設定

GitHubでは、リポジトリの任意のブランチの、任意のディレクトリをホームページとしてウェブに公開することができる。

* 上のタブの「Settings」を選ぶ。
* 左のメニューの「Pages」を選ぶ。
* 「GitHub Pages」という画面になるので「Source」として「None」となっているボタンをクリックし、`main`を選ぶ。
* 「`/root`」というボタンが現れるので、クリックして「`/docs`」を選んで「Save」ボタンを押す。

すると、

```txt
Your site is ready to be published at https://アカウント名.github.io/pages-sample/
```

という表示がされる。実際に公開するまでしばらくかかるため、数分まってからクリックしてアクセスしよう。もし「404」と表示されたら、またしばらく待ってからリロードすること。「MNIST Check」という画面が出たら成功だ。

先ほどの設定は、`main`ブランチにあるスナップショットの、`/docs`をルートディレクトリとしてウェブサイトを公開せよ、という意味だ。今回は`/docs`以下に`index.html`が置いてあるので、それが表示されている。

### Step 3: 数字認識を確認

画面には二つの黒い領域がある。左の「Please draw here」とある方にマウスで数字を入力してみよ。右側の「Input Image」が更新され、「Your figure is ... 1!」などというメッセージが表示されるはずだ。

学習済みモデルは、28x28ピクセルの画像を学習しているため、入力された画像を、まずは28x28ピクセルに変換する必要がある。それが右側の「Input Image」である。この「Input Image」を学習済みニューラルネットワークに入力し、これが何の数字であるかを推定している。本来は前処理をして渡すのだが、それを省いているために認識精度がかなり低くなっているはずだ。いろいろ数字を入力し、どの数字の認識が悪いか試してみよ。

### レポート課題

最も「これはないだろう」という判定画面(誰が見ても6なのに4と判定してしまった等)を選び、そのスクリーンショットをレポートとして提出せよ。また、どのような数字が誤判定しやすいか、またそれはなぜかを考察せよ。

## 課題3: 簡単なゲーム作成
